<div class="tasks">
  <div class="filter">
    <mat-accordion>
      <mat-expansion-panel *ngFor="let task of todoList; let i = index" [expanded]="step === i" (opened)="setStep(i)">
        <mat-expansion-panel-header>
          <mat-panel-title>{{'Task number '+ (+i+1)}}</mat-panel-title>
          <mat-panel-description>
              {{task.title}}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <mat-card-content>
          <mat-icon [class]="task.priority" [matTooltip]="'Task priority:&nbsp;&nbsp;' + task.priority">flag</mat-icon>&nbsp;&nbsp;
          <mat-checkbox  [(ngModel)]="task.completed" labelPosition="before">
            {{task.title}}
          </mat-checkbox>
          <br/>
          <br/>
          <p>
            Deadline:&nbsp;&nbsp;{{task.deadline | date:'fullDate'}}
          </p>
        </mat-card-content>
        <mat-action-row>
          <mat-action-list>
            <button
              mat-mini-fab
              color="primary"
              (click)="openSnackBar('Delete item?', 'Confirm', $event)"
            >
              <mat-icon [id]="task.id">delete</mat-icon>
            </button>
          </mat-action-list>
          <mat-action-list>
            <button *ngIf="i!==0" mat-button color="warn" (click)="prevStep()">Previous</button>
            <button mat-button color="primary" (click)="nextStep()">
              {{i===todoList.length-1 ? 'End' : 'Next'}}
            </button>
          </mat-action-list>
        </mat-action-row>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>
